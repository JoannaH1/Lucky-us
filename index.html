<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>♡</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
  <script src="app.js" defer></script>
</head>

<body>
  <div class="bg"></div>

  <main class="app">

    <!-- INTRO -->
    <section class="screen active" id="intro" aria-label="Intro">
      <div class="center">
        <div class="intro-mark">♡</div>
        <h2 class="typewriter" data-text="Hey my love… I made something for you."></h2>
        <p class="subtitle">Best viewed on your phone, full screen.</p>
        <button class="btn btn-primary" type="button" onclick="go('lucky')">Tap to continue</button>
      </div>

      <div class="footer-note">Made with love.</div>
    </section>

    <!-- LUCKY (Cards frame + photo card) -->
    <section class="screen" id="lucky" aria-label="Lucky us">
      <div class="center">
        <div class="card-frame" aria-label="Playing cards framing our photo">
          <div class="edge-card top"></div>
          <div class="edge-card right"></div>
          <div class="edge-card bottom"></div>
          <div class="edge-card left"></div>

          <div class="photo-card" aria-label="Our photo card">
            <span class="rank tl">A</span>
            <span class="suit tl">♥</span>
            <span class="rank br">J</span>
            <span class="suit br">♥</span>
            <img src="assets/hero.jpeg" alt="Us" />
          </div>
        </div>

        <p class="hint subtle">♡</p>
      </div>

      <nav class="nav-bottom" aria-label="Navigation">
        <button class="btn btn-ghost btn-icon" type="button" onclick="go('intro')" aria-label="Back">‹</button>
        <button class="btn btn-ghost" type="button" onclick="go('reasons')">Next</button>
      </nav>
    </section>

    <!-- REASONS (Envelope — hidden until opened) -->
    <section class="screen" id="reasons" aria-label="Reasons">
      <div class="center">
        <div class="section-title">A few reasons</div>

        <button class="envelope" id="envelope" type="button" aria-label="Tap to open the envelope">
          <div class="env-shadow"></div>

          <!-- back -->
          <div class="env-back"></div>

          <!-- letter (hidden until open) -->
          <div class="env-letter" aria-hidden="true">
            <div class="env-letter-inner">
              <p>• You make me feel safe.</p>
              <p>• You’re gentle with my heart.</p>
              <p>• You make ordinary days feel special.</p>
              <p>• You show up — in the little things.</p>
              <p>• You feel like home.</p>
            </div>
          </div>

          <!-- front -->
          <div class="env-front"></div>
          <div class="env-flap"></div>
          <div class="env-seal">♡</div>
        </button>

        <p class="hint">Tap the envelope</p>
      </div>

      <nav class="nav-bottom" aria-label="Navigation">
        <button class="btn btn-ghost btn-icon" type="button" onclick="go('lucky')" aria-label="Back">‹</button>
        <button class="btn btn-ghost" type="button" onclick="go('letter')">Next</button>
      </nav>
    </section>

    <!-- LETTER + SECRET VIDEO -->
    <section class="screen" id="letter" aria-label="Letter">
      <div class="center">
        <div class="letter-card">
          <h2>To you,</h2>
          <p>
            I don’t say it enough, but I notice everything you do for me.
            Thank you for your patience, your care, and the way you make life feel softer.
          </p>
          <p>
            You don’t understand the love I have for you.
            You are the best thing that ever happened to me. I love you.
          </p>
          <p class="sign">— Joanna</p>

          <div class="secret-row">
            <span class="secret-label">psst…</span>
            <button class="btn btn-small btn-ghost" id="secretBtn" type="button">tap here</button>
          </div>
        </div>
      </div>

      <nav class="nav-bottom" aria-label="Navigation">
        <button class="btn btn-ghost btn-icon" type="button" onclick="go('reasons')" aria-label="Back">‹</button>
        <button class="btn btn-ghost" type="button" onclick="go('game')">Next</button>
      </nav>

      <!-- Secret video modal -->
      <div class="modal" id="videoModal" aria-hidden="true">
        <div class="modal-card">
          <button class="btn btn-ghost btn-icon modal-close" id="closeVideo" type="button" aria-label="Close">✕</button>
          <video controls playsinline>
            <source src="assets/secret.mp4" type="video/mp4" />
          </video>
        </div>
      </div>
    </section>

    <!-- MEMORY GAME -->
    <section class="screen" id="game" aria-label="Memory game">
      <div class="center game-center">
        <div class="section-title">Match our memories</div>

        <div class="hud" aria-label="Game stats">
          <div class="hud-pill">Matches <span id="hudMatches">0</span>/8</div>
          <div class="hud-pill">Moves <span id="hudMoves">0</span></div>
          <div class="hud-pill">Time <span id="hudTime">0:00</span></div>
          <button class="btn btn-small btn-ghost" id="restart" type="button">Restart</button>
        </div>

        <div class="game-board" id="memoryGrid" aria-label="Memory grid"></div>

        <div class="win-modal" id="winModal" aria-hidden="true">
          <div class="win-card">
            <div class="win-title">You did it ♡</div>
            <div class="win-sub">I love making memories with you.</div>
            <button class="btn btn-primary" id="closeWin" type="button">Close</button>
          </div>
        </div>

        <p class="hint subtle">You can always go next ♡</p>
      </div>

      <nav class="nav-bottom" aria-label="Navigation">
        <button class="btn btn-ghost btn-icon" type="button" onclick="go('letter')" aria-label="Back">‹</button>
        <button class="btn btn-ghost" type="button" onclick="go('final')">Next</button>
      </nav>
    </section>

    <!-- FINAL -->
    <section class="screen" id="final" aria-label="Final">
      <div class="center">
        <div class="final-card">
          <div class="final-title">I love you.</div>
          <div class="final-sub">Always.</div>
          <div class="final-note">Screenshot this ♡</div>
        </div>

        <div class="bonus-photo" aria-label="Bonus photo">
          <img src="assets/us9.jpeg" alt="Bonus us photo">
          <div class="bonus-cap">us ♡</div>
        </div>

        <button class="btn btn-primary" type="button" onclick="confetti()">Celebrate ♡</button>
      </div>

      <canvas id="confetti"></canvas>
    </section>

  </main>
</body>
</html>
